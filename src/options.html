<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>Spoiler Slayer</title>
        <link href="/styles/popup.css" rel="stylesheet" />
    </head>
    <body id="options">
        <template id="regex-input">
            <label class="supports-regex">
                <span class="regex-marker">/</span>
                <input autocomplete="off" type="text" name="spoiler" />
                <span class="regex-marker">/ig<i class="regex-error icon solid">!</i></span>
            </label>

            <label class="regex-checkbox"><input type="checkbox" name="isRegex" value="1" /><code>/re/</code></label>
        </template>

        <template id="spoiler">
            <div class="row spoiler-row">
                <a class="fader inline-icon delete-item">‚úñÔ∏è</a>
                <regex-input name="spoiler"></regex-input>
                <!-- <a class="inline-icon fader">üè∑Ô∏è</a> -->
            </div>
        </template>

        <template id="site">
            <div class="row site-row">
                <a class="fader inline-icon delete-item">‚úñÔ∏è</a>
                <label class="selector-input">
                    <input
                        name="selector"
                        type="text"
                        autocomplete="off"
                        placeholder=".sitetable > .thing.link:visible, .usertext-body, .scrollerItem"
                    />
                    <span class="site-at">@</span>
                </label>
                <regex-input name="urlRegex"></regex-input>
            </div>
        </template>

        <template id="subscription">
            <div class="row subscription-row">
                <details>
                    <summary>
                        <a class="fader inline-icon expander">‚ñ∫</a>
                        <h3>
                            <span class="update-failed none pulse icon">!</span>
                            <span class="export-name">Unnamed Subscription</span>
                        </h3>
                        <time class="last-updated">Never</time>
                        <label class="no-click">
                            <input type="checkbox" name="useSpoilers">Spoilers
                             (<span class="spoilers-count">-</span>)
                        </label>
                        <label class="no-click">
                            <input type="checkbox" name="useSites">Sites
                             (<span class="sites-count">-</span>)
                        </label>
                    </summary>
                    <div class="subscription-content">
                        <div class="middle">
                            <a class="fader inline-icon delete-item">‚úñÔ∏è</a>
                            <a class="subscription-url" href="#" target="_blank">Invalid</a>
                        </div>
                        <div class="update-failed-banner none">
                            <p>Failed to update! Last attempt <time class="last-update-attempt">Never</time></p>
                            <pre class="update-failed-text">Unspecified error</pre>
                        </div>
                        <div class="subscription-spoilers none">
                            <h4>Spoilers</h4>
                            <div class="col-2 subscription-spoilers-content"></div>
                        </div>
                        <div class="subscription-sites none">
                            <h4>Sites &amp; Selectors</h4>
                            <div class="subscription-sites-content"></div>
                        </div>
                    </div>
                </details>
            </div>
        </template>

        <h1 id="title">Spoiler Slayer</h1>
        <hr />

        <section id="subscriptions-settings" data-type="subscriptions">
            <header>
                <h2>Subscriptions</h2>
                <ul class="left toolbar">
                        <li><a title="Remove all subscriptions" href="#" class="toolbar-action fader remove-all">‚úñÔ∏è</a></li>
                        <li><a title="Import subscriptions from a file" href="#" class="toolbar-action fader import">‚á™</a></li>
                        <li><a title="Export subscriptions to a file" href="#" class="toolbar-action fader export">‚á™</a></li>
                    <li><a href="#" id="refresh-subscriptions" class="fader spinner">‚Üª</a></li>
                </ul>
            </header>
            <p>
                Subscribe to public spoilers lists that stay fresh with new spoilers, sites, and selectors
                <br />
                <small>
                    Must be a <a target="_blank" href="https://gist.github.com/search?q=%23spoiler-slayer">GitHub gist</a> or
                    <a target="_blank" href="https://gitlab.com/search?search=%23spoiler-slayer&snippets=true">GitLab snippet</a>.
                    Only add trusted sources!
                </small>
            </p>
            <form class="new-entry" id="new-subscription">
                <div class="row subscription-row">
                    <a class="inline-icon fader" id="plus-subscription">‚ûï</a>
                    <label class="url">
                        <input
                            name="url"
                            type="url"
                            autocomplete="off"
                            required
                            xpattern="^https://.*\.?git(hub|lab)\.com/.*"
                            placeholder="https://gist.github.com/brettp/0e3e61b22c930b429670ac94de605c57/"
                            data-validation-error="Use a GitHub gist or GitLab snippet URL"
                        />
                    </label>
                    <label>
                        <input type="checkbox" checked="checked" name="useSpoilers"> Spoilers
                    </label>
                    <label>
                        <input type="checkbox" name="useSites"> Sites
                    </label>
                    <input type="submit" class="none" />
                </div>
                <div class="update-failed-banner none">
                    <p>Failed to add subscription:</p>
                    <pre class="update-failed-text">Unspecified error</pre>
                </div>
            </form>

            <form id="existing-subscriptions">
                <ol id='subscriptions'></ol>
            </form>
        </section>

        <section id="spoilers-settings" data-type="spoilers">
            <header>
                <h2>Spoilers</h2>
                <ul class="left toolbar">
                    <li><a title="Remove all spoilers" href="#" class="toolbar-action fader remove-all">‚úñÔ∏è</a></li>
                    <li><a title="Import spoilers from a file" href="#" class="toolbar-action fader import">‚á™</a></li>
                    <li><a title="Export spoilers to a file" href="#" class="toolbar-action fader export">‚á™</a></li>
                </ul>
            </header>
            <p>
                Add words and phrases to block
                <br />
                <small>
                    Spoilers are matched by the exact entire word, case insensitive. "GoT" will match "got" but not "gotcha".
                    Check <code>/re/</code> to enable <a href="https://www.regular-expressions.info/">regex</a> for more flexible matching.
                </small>
            </p>
            <form class="new-entry" id="new-spoiler">
                <div class="row spoiler-row">
                    <a class="inline-icon fader" id="plus-spoiler">‚ûï</a>
                    <regex-input
                        name="spoiler"
                        placeholder="teddy flood"
                        regex-placeholder="west ?world">
                    </regex-input>
                </div>
                <input type="submit" class="none" />
            </form>
            <form id="existing-spoilers">
                <div id="spoilers"></div>
            </form>
        </section>

        <section id="sites-settings" data-type="sites">
            <header>
                <h2>Sites &amp; Selectors</h2>
                <ul class="left toolbar">
                    <li><a title="Remove all sites &amp; selectors" href="#" class="toolbar-action fader remove-all">‚úñÔ∏è</a></li>
                    <li><a title="Import sites &amp; selectors from a file" href="#" class="toolbar-action fader import">‚á™</a></li>
                    <li><a title="Export sites &amp; selectors to a file" href="#" class="toolbar-action fader export">‚á™</a></li>
                </ul>
            </header>
            <p>Add sites to block (regex supported) and a selector for that site</p>
            <form class="new-entry" id="new-site">
                <div class="row site-row">
                    <a class="inline-icon fader" id="plus-site">‚ûï</a>
                    <label class="selector-input">
                        <input
                            name="selector"
                            type="text"
                            autocomplete="off"
                            placeholder=".sitetable > .thing.link:visible, .usertext-body, .scrollerItem"
                        />
                        <span class="site-at">@</span>
                    </label>
                    <regex-input
                        name="urlRegex"
                        placeholder="reddit.com/r/doctorwho"
                        regex-placeholder="reddit.*doctor.*who.*">
                    </regex-input>
                </div>
                <input type="submit" class="none" />
            </form>
            <form id="existing-sites">
                <ol id="sites"></ol>
            </form>
        </section>

        <footer>
            <form class="none">
                <input type="file" id='import-files'/>
                <input type="submit" />
            </form>
            <div class="left">
                <ul class="menu-h">
                    <li><a href="#" id='reset-spoilers'>Reset to default spoilers</a></li>
                    <li><a href="#" id='reset-sites'>Reset to default sites</a></li>
                    <li><a href="#" id='import'>Import</a></li>
                    <li><a href="#" id='export'>Export</a></li>
                </ul>
            </div>
            <div class="right">
                <ul class="menu-h">
                    <li><a href="#" id="clear-settings">Clear settings</a></li>
                </ul>
            </div>
            <br /><br />
            <p class="clear-both">
                <small>
                    Created by Brett Profitt as <a href="">open source software</a>. <span>Version 1.0.0.0</span>
                </small>
            </p>
        </footer>

        <script src="/scripts/lib/helpers.js"></script>
        <script src="/scripts/lib/msgApi.js"></script>
        <script src="/scripts/lib/settings.js"></script>
        <script src="/scripts/lib/models.js"></script>
        <script src="/scripts/lib/components.js"></script>
        <script src="/scripts/lib/ogSettings.js"></script>
        <script src="/scripts/options.js"></script>
    </body>
</html>
