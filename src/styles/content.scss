$transition_duration: .5s;
$heavy_blur: blur(8px);
$hover_blur: blur(3px);

.glamoured-active {
    cursor: no-drop;

    // must use animations for elements injected into the dom
    .content-wrapper {
        transition-duration: $transition_duration;
        animation: blur $transition_duration ease-in-out;
        // this is just a default
        // the real value is injected to the page
        filter: $heavy_blur;

        // don't allow mouse events on obscured content
        &>* {
            pointer-events: none;
        }
    }

    .spoiler-info {
        position: absolute;
        transition-duration: $transition_duration;
        animation: fade-in $transition_duration ease-in-out;

        padding: 6pt 12pt;
        z-index: 1000;

        color: white;
        opacity: 1;

        font: 700 14pt verdana, arial, helvetica, sans-serif !important;
        text-shadow: 0 0 10px #000;
        text-stroke: .25px black;
        -webkit-text-stroke: .25px black;
    }

    &:hover {
        // also overridden with injected CSS
        .content-wrapper {
            filter: $hover_blur;
        }

        .spoiler-info {
            filter: $heavy_blur;
            opacity: 0;
        }
    }

    &.no-fx {
        transition: initial !important;
        animation: initial !important;
        position: relative;

        .spoiler-info {
            transition: none !important;
            animation: none !important;
        }

        &:after {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            width: 100%;
            display: block;
            background-color: black;
        }

        &:hover {
            filter: none !important;
            animation: none !important;
            transition: none !important;

            .spoiler-info {
                opacity: initial !important;
                filter: initial !important;
            }
        }
    }
}

// can use normal transitions when revealing
.glamoured-active.revealed:not(.no-fx) {
    pointer-events: none;

    .content-wrapper {
        filter: none;
    }

    .spoiler-info {
        opacity: 0;
        filter: $heavy_blur;
    }
}


// the target blur value is injected into the page
@keyframes blur {
    from {
        filter: inherit;
    }
}


@keyframes unblur {
    to {
        filter: unset;
    }
}

@keyframes fade-in {
    from {
        opacity: 0;
    }
}

@keyframes fade-out {
    from {
        opacity: inherit;
    }
    to {
        opacity: 0;
    }
}




// old unused site-specific stuff

article {
    &.item {
        &.graphical .spoiler-glamour h3 {
            font-size: 24px !important;
            line-height: 24px !important;
            padding: 0;
            margin: 0;
        }

        &.tabular .spoiler-glamour h3 {
            font-size: 24px !important;
            line-height: 24px !important;
            padding: 0;
            margin: 0;
        }
    }

    &.short .spoiler-glamour.small h3 {
        margin: 0;
        font-size: 18px !important;
        line-height: 18px !important;
    }
}

.trend-item {
    .spoiler-glamour {
        width: 95%;
        padding: 3px 6px 1px;

        h3 {
            font-size: 11px !important;
            line-height: 11px !important;
            margin-top: 4px !important;
        }
    }

    .click-to-view-spoiler {
        font-size: 11px !important;
        line-height: 11px !important;
        margin-top: 4px !important;
    }
}

.comment-renderer-text {
    .spoiler-glamour {
        width: 95%;
        padding: 3px 6px 1px;

        h3 {
            font-size: 11px !important;
            line-height: 11px !important;
            margin-top: 4px !important;
        }
    }

    .click-to-view-spoiler {
        font-size: 11px !important;
        line-height: 11px !important;
        margin-top: 4px !important;
    }
}

.u0Entry.glamoured .spoiler-glamour {
    padding: 4px;

    .spoiler-obituary {
        vertical-align: top;
    }
}

#pagelet_trending_tags_and_topics ul>li {
    .spoiler-glamour {
        width: 95%;
        padding: 3px 6px 1px;

        h3 {
            font-size: 11px !important;
            line-height: 11px !important;
            margin-top: 4px !important;
        }
    }

    .click-to-view-spoiler {
        font-size: 11px !important;
        line-height: 11px !important;
        margin-top: 4px !important;
    }
}