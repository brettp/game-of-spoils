:root {
    --transition-duration: .5s;
    --heavy-blur: 8px;
    --hover-blur: 3px;
}

.glamoured-active {
    cursor: no-drop;

    // must use animations for elements injected into the dom
    .content-wrapper {
        transition-duration: var(--transition-duration);
        animation: blur var(--transition-duration) ease-in-out;
        // this is just a default
        // the real value is injected to the page
        filter: blur(var(--heavy-blur));

        // don't allow mouse events on obscured content
        &>* {
            pointer-events: none;
        }
    }

    .spoiler-info {
        position: absolute;
        transition-duration: var(--transition-duration);
        animation: fade-in var(--transition-duration) ease-in-out;

        padding: 0;
        margin: 0;

        // padding: 6pt 12pt;
        z-index: 1000;

        color: white;
        opacity: 1;

        font: 700 14pt verdana, arial, helvetica, sans-serif !important;
        text-shadow: 0 0 10px #000;
        text-stroke: .25px black;
        -webkit-text-stroke: .25px black;
    }

    &:hover {
        // also overridden with injected CSS
        .content-wrapper {
            filter: blur(var(--hover-blur));
        }

        .spoiler-info {
            filter: blur(var(--heavy-blur));
            opacity: 0;
        }
    }

    &.no-fx {
        transition: initial !important;
        animation: initial !important;
        position: relative;

        .spoiler-info {
            transition: none !important;
            animation: none !important;
        }

        &:after {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            width: 100%;
            display: block;
            background-color: black;
        }

        &:hover {
            filter: none !important;
            animation: none !important;
            transition: none !important;

            .spoiler-info {
                opacity: initial !important;
                filter: initial !important;
            }
        }
    }
}

// can use normal transitions when revealing
.glamoured-active.revealed:not(.no-fx) {
    pointer-events: none;

    .content-wrapper {
        filter: none;
    }

    .spoiler-info {
        opacity: 0;
        filter: blur(var(--heavy-blur));
    }
}


// the target blur value is injected into the page
@keyframes blur {
    from {
        filter: inherit;
    }
}


@keyframes unblur {
    to {
        filter: unset;
    }
}

@keyframes fade-in {
    from {
        opacity: 0;
    }
}

@keyframes fade-out {
    from {
        opacity: inherit;
    }
    to {
        opacity: 0;
    }
}